<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SVOX Pico libpicotts: Picodbg</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SVOX Pico libpicotts
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Picodbg</div></div>
</div><!--header-->
<div class="contents">
<p >------------------------------------------------&mdash;<br  />
<b> Pico Debug Support </b><br  />
------------------------------------------------&mdash;<br  />
</p>
<h2><a class="anchor" id="autotoc_md9"></a>
GENERAL REMARKS</h2>
<p >This module provides a set of macros to help debug the Pico system. The usage of macros allows for completely removing debug code from the binaries delivered to customers. To enable diagnostic output the preprocessor symbol PICO_DEBUG has to be defined.</p>
<p >By using global variables (to store the current log level etc.) this module violates a basic Pico design principle!</p>
<p >Justification:<br  />
</p><ul>
<li>going without global data would reduce the functionality of this module considerably (e.g., log level could not be changed at runtime etc.)</li>
<li>at the moment, the only known system interdicting global variables is Symbian; but even there global variables are possible by using thread-local storage</li>
<li>allocating global data on the heap would require to pass a handle to this memory block to all routines of this module which in turn implies that <em>every</em> function in the Pico system would require a pointer to some global data; obviously, this would be very awkward</li>
</ul>
<p >Furthermore, this module uses the non-standardized but handy <b>FUNCTION</b> macro. It expands to the name of the enclosing function. For compilers not supporting this macro simply define <b>FUNCTION</b> as an empty string.</p>
<p >INITIALIZATION/TERMINATION<br  />
-----------------------&mdash;<br  />
Before using any debug macros, this module has to be initialized by calling PICODBG_INITIALIZE(). If the routines are not needed anymore, PICODBG_TERMINATE() has to be called to terminate the module (e.g., to close the log file).</p>
<p >TRACING<br  />
----&mdash;<br  />
Each tracing message is associated with a log level which describes its severity. The following levels are supported:</p><ul>
<li>Trace - Very detailed log messages, potentially of a high frequency and volume</li>
<li>Debug - Less detailed and/or less frequent debugging messages</li>
<li>Info - Informational messages</li>
<li>Warn - Warnings which don't appear to the Pico user</li>
<li>Error - Error messages</li>
</ul>
<p >Tracing messages can use the well-known printf format specification. But because variadic macros (macros with a variable no. arguments) are not commonly supported by compilers a little trick is used which requires the format string and its arguments to be enclosed in double parenthesis:</p>
<ul>
<li>PICODBG_INFO(("hello, world!"));</li>
<li>PICODBG_TRACE(("argc=%d", argc)); ...</li>
</ul>
<p >Each tracing message is expected to be a single line of text. Some contextual information (e.g., log level, time and date, source file and line number) and a newline are automatically added. The output format can be customized by a call to PICODBG_SET_OUTPUT_FORMAT().</p>
<p >Sample output:</p><ul>
<li>*** info|2008-04-03|14:51:36|dbgdemo.c(15)|hello world</li>
<li>*** trace|2008-04-03|14:51:36|dbgdemo.c(16)|argc=2</li>
<li>...</li>
</ul>
<p >To compose a tracing message line consisting of, e.g. the elements of an array, on the Info level two additional macros shown in the following example are provided:</p>
<p >PICODBG_INFO_CTX();<br  />
 for (i = 0; i &lt; len; i++)<br  />
 ...some calc with arr and i<br  />
 PICODBG_INFO_MSG((" %d", arr[i]));<br  />
 }<br  />
 PICODBG_INFO_MSG(("\n"));<br  />
 Colored output of tracing messages helps to capture severe problems quickly. This feature is supported on the Windows platform and on platforms supporting ANSI escape codes. PICODBG_ENABLE_COLORS() lets you turn on and off colored output.</p>
<p >FILTERING<br  />
------&mdash;<br  />
By calling PICODBG_SET_LOG_LEVEL() the log level may be changed at any time to increase/decrease the amount of debugging output.</p>
<p >By calling PICODBG_SET_LOG_FILTERFN() the log filter may be changed at any time to change the source file name being used as filter for log messages (ie. only tracing info of the specified file will be logged). To disable the file name based filter set the filter file name to an empty string.</p>
<p >Future version of this module might provide further filtering possibilities (e.g., filtering based on function names * etc.).</p>
<p >LOGGING<br  />
----&mdash;<br  />
By default, tracing messages are output to the console (stderr). This allows for separating diagnostic output from other console output to stdout. In addition, tracing messages may be saved to a file by calling PICODBG_SET_LOG_FILE(). Currently, file output is the only additional output target; but on embedded systems, more output targets may be required (e.g., sending output to a serial port or over the network).</p>
<p >ASSERTIONS<br  />
-------&mdash;<br  />
To support the 'design/programming by contract' paradigm, this module also provides assertions. PICODBG_ASSERT(expr) evualuates an expression and, when the result is false, prints a diagnostic message and aborts the program.</p>
<p >FUTURE EXTENSIONS<br  />
--------------&mdash;<br  />
</p><ul>
<li>advanced tracing functions to dump complex data</li>
<li>debug memory allocation that can be used to assist in finding memory problems </li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 4 2021 05:19:16 for SVOX Pico libpicotts by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
